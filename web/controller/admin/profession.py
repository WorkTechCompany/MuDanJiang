from web.controller.admin import route_adminfrom common.libs.WebHelper import ops_renderfrom common.model.data import datafrom common.model.classify import classifyfrom flask import request, jsonifyfrom application import dbimport time@route_admin.route('/profession', methods=['GET', 'POST'])def profession_index():    resp = {'code': 200, 'info': {}}    req = request.values    #    if request.method == 'GET':        try:            id = req['id']            info = data.query.filter_by(id=id).first()            resp['info'] = {                'id': id,                'title': info.title,                'f0': info.f0_desc,                'f1': info.f1_desc,                'f2': info.f2_desc,                'time': info.time,                "content": info.content            }            print(resp['info'])            return ops_render('/admin/profession.html', resp)        except:            return ops_render('/admin/profession.html', resp)@route_admin.route('/update', methods=['GET', 'POST'])def update():    resp = {'code': 200, 'totalCount': 0, 'pageTotal': 0, 'list': {}, 'curPage': 1}    # req = request.values    # id = req['id']    # f0 = req['f0']    # f1 = req['f1']    # f2 = req['f2']    # title = req['title']    # time = req['time']    # content = req['content']    fs = request.files['image_upload']    if fs.filename != '':        fs.save(fs.filename)    return 'success'    #    # if f0 != '/':    #     get_f0 = classify.query.filter_by(name=f0).first().did    # else:    #     get_f0 = -1    # if f1 !='/':    #     get_f1 = classify.query.filter_by(name=f1).first().did    # else:    #     get_f1 = -1    # if f2 != '/':    #     get_f2 = classify.query.filter_by(name=f2).first().did    # else:    #     get_f2 = -1    #    # update_info = data.query.filter_by(id=id).first()    # update_info.title = title    # update_info.f0 = get_f0    # update_info.f1 = get_f1    # update_info.f2 = get_f2    # update_info.time = time    # update_info.content = content    # db.session.commit()    # resp['msg'] = '操作成功'    return jsonify(resp)@route_admin.route('/add', methods=['GET', 'POST'])def add():    resp = {'code': 200, 'totalCount': 0, 'pageTotal': 0, 'list': {}, 'curPage': 1}    req = request.values    print(req)    f0 = req['f0']    f1 = req['f1']    f2 = req['f2']    title = req['title']    time = req['time']    content = req['content']    if f0 != '/':        get_f0 = classify.query.filter_by(name=f0).first().did    else:        get_f0 = -1    if f1 !='/':        get_f1 = classify.query.filter_by(name=f1).first().did    else:        get_f1 = -1    if f2 != '/':        get_f2 = classify.query.filter_by(name=f2).first().did    else:        get_f2 = -1    print(get_f1)    add_info = data(f0=get_f0, f1=get_f1, f2=get_f2, title=title, time=time, content=content)    db.session.add(add_info)    db.session.commit()    resp['msg'] = '操作成功'    return jsonify(resp)