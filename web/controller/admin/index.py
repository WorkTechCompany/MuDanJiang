from web.controller.admin import route_adminfrom common.libs.WebHelper import ops_renderfrom common.model.data import datafrom application import db, appfrom flask import request, jsonifyfrom sqlalchemy import or_import pandas, numpy@route_admin.route('/index', methods=['GET', 'POST'])def admin_index():    resp = {'code': 200, 'totalCount': 0, 'pageTotal': 0, 'list': {}, 'curPage': 1}    req = request.values    page = req['page'] if 'page' in req else 1    f0 = req['f0'] if 'f0' in req else -1    f1 = req['f1'] if 'f1' in req else -1    f2 = req['f2'] if 'f2' in req else -1    offset = int(int(page) - 1) * 100    if f0 != -1:        query = data.query.filter_by(f0=f0)    if f1 != 'null' and f1 != '-1':        query = data.query.filter_by(f1=f1)    if f2 != 'null' and f2 != '-1':        query = data.query.filter_by(f2=f2)    totalCount = query.count()    list = query.offset(offset).limit(100).all()    resp['totalCount'] = totalCount    resp['list'] = list    resp['pageTotal'] = (totalCount // 100)    resp['curPage'] = page    resp['f0'] = f0    resp['f1'] = f1    resp['f2'] = f2    return ops_render('/admin/apply.html', resp)@route_admin.route('/delete', methods=['GET', 'POST'])def delete():    resp = {'code': 200, 'totalCount': 0, 'pageTotal': 0, 'list': {}, 'curPage': 1}    req = request.values    id = req['id']    article1 = data.query.filter_by(id=id).first()    db.session.delete(article1)    db.session.commit()    resp['msg'] = '操作成功'    return jsonify(resp)@route_admin.route('/show_content', methods=['GET', 'POST'])def show_content():    resp = {'code': 200, 'totalCount': 0, 'pageTotal': 0, 'list': {}, 'curPage': 1}    req = request.values    id = req['id']    article1 = data.query.filter_by(id=id)    # db.session.delete(article1)    # db.session.commit()    resp['msg'] = article1[0].content    # print(resp)    return jsonify(resp)@route_admin.route('/getinfo', methods=['GET','POST'])def post():    '''    f0：    f1:    f2:    :return:    '''    response = {'code': 200, 'msg': '查询成功'}    req = request.values    f0 = req['f0'] if 'f0' in req else -1    f1 = req['f1'] if 'f1' in req else -1    f2 = req['f2'] if 'f2' in req else -1    if f0 != -1:        query = data.query.filter_by(f0=f0)    if f1 != '-1':        query = data.query.filter_by(f1=f1)    if f2 != '-1':        query = data.query.filter_by(f2=f2)    result = query.all()    tmp_list = []    for item in result:        tmp_data = {            'id': item.id,            'merchant_id': item.title,            'time': item.time        }        tmp_list.append(tmp_data)    response['list'] = tmp_list    print(response)    return jsonify(response)@route_admin.route('/getinfo/getcontent', methods=['GET','POST'])def post2():    req = request.values    f0 = req['f0'] if 'f0' in req else -1    f1 = req['f1'] if 'f1' in req else -1    f2 = req['f2'] if 'f2' in req else -1    title = req['title'] if 'title' in req else '测试详细3'    if title!= '':        query = data.query.filter_by(title=title)    if f0 != -1:        query = data.query.filter_by(f0=f0)    if f1 != '-1':        query = data.query.filter_by(f1=f1)    if f2 != '-1':        query = data.query.filter_by(f2=f2)    print(query)    result = query.all()    res = []    for item in result:        dict = {}        dict['content'] = item.content        res.append(dict)    print(res)    return 'success2'